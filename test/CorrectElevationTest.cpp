// Copyright 2022, Urs Spiegelhalter
// Author: Urs Spiegelhalter <urs.sp99@gmail.com>.

#include <cstdint>
#include <gtest/gtest.h>
#include "global/Constants.h"
#include "correctosmelevation/osm/CorrectElevation.h"

using global::INVALID_ELEV;
using global::DEFAULT_ELE_TAG;
using correctosmelevation::osm::CorrectElevation;

// ____________________________________________________________________________
TEST(CORRECTELEVATIONTEST, correct) {
  CorrectElevation correctElevation("./testMap.osm", "./tmp.osm",
                                    DEFAULT_ELE_TAG, 1000, 1000);
  correctElevation.initialize();

  correctElevation.correctRoutes();

  // Check the elevation for all nodes.
  ASSERT_EQ(100, correctElevation.getElevation(1));
  ASSERT_EQ(100, correctElevation.getElevation(2));
  ASSERT_EQ(100, correctElevation.getElevation(3));
  ASSERT_EQ(100, correctElevation.getElevation(4));
  ASSERT_EQ(99, correctElevation.getElevation(5));
  ASSERT_EQ(99, correctElevation.getElevation(6));
  ASSERT_EQ(99, correctElevation.getElevation(7));
  ASSERT_EQ(99, correctElevation.getElevation(8));
  ASSERT_EQ(99, correctElevation.getElevation(9));
  ASSERT_EQ(100, correctElevation.getElevation(10));
  ASSERT_EQ(99, correctElevation.getElevation(11));
  ASSERT_EQ(100, correctElevation.getElevation(12));
  ASSERT_EQ(100, correctElevation.getElevation(13));
  ASSERT_EQ(100, correctElevation.getElevation(14));
  ASSERT_EQ(100, correctElevation.getElevation(15));
  ASSERT_EQ(99, correctElevation.getElevation(16));
  ASSERT_EQ(99, correctElevation.getElevation(17));
  ASSERT_EQ(99, correctElevation.getElevation(18));
  ASSERT_EQ(500, correctElevation.getElevation(19));
  ASSERT_EQ(490, correctElevation.getElevation(20));
  ASSERT_EQ(461, correctElevation.getElevation(21));
  ASSERT_EQ(400, correctElevation.getElevation(22));
  ASSERT_EQ(390, correctElevation.getElevation(23));
  ASSERT_EQ(490, correctElevation.getElevation(24));
  ASSERT_EQ(490, correctElevation.getElevation(25));
  ASSERT_EQ(480, correctElevation.getElevation(26));
  ASSERT_EQ(INVALID_ELEV, correctElevation.getElevation(27));
  ASSERT_EQ(380, correctElevation.getElevation(28));
  ASSERT_EQ(360, correctElevation.getElevation(29));
  ASSERT_EQ(300, correctElevation.getElevation(30));
  ASSERT_EQ(INVALID_ELEV, correctElevation.getElevation(31));
  ASSERT_EQ(370, correctElevation.getElevation(32));
  ASSERT_EQ(340, correctElevation.getElevation(33));
  ASSERT_EQ(320, correctElevation.getElevation(34));
  ASSERT_EQ(490, correctElevation.getElevation(35));
  ASSERT_EQ(360, correctElevation.getElevation(36));
  ASSERT_EQ(1000, correctElevation.getElevation(37));
  ASSERT_EQ(900, correctElevation.getElevation(38));
  ASSERT_EQ(900, correctElevation.getElevation(39));
  ASSERT_EQ(850, correctElevation.getElevation(40));
  ASSERT_EQ(800, correctElevation.getElevation(41));
  ASSERT_EQ(800, correctElevation.getElevation(42));
  ASSERT_EQ(790, correctElevation.getElevation(43));
  ASSERT_EQ(750, correctElevation.getElevation(44));
  ASSERT_EQ(750, correctElevation.getElevation(45));
  ASSERT_EQ(700, correctElevation.getElevation(46));
  ASSERT_EQ(202, correctElevation.getElevation(47));
  ASSERT_EQ(216, correctElevation.getElevation(48));
  ASSERT_EQ(238, correctElevation.getElevation(49));
  ASSERT_EQ(293, correctElevation.getElevation(50));
  ASSERT_EQ(212, correctElevation.getElevation(51));
  ASSERT_EQ(199, correctElevation.getElevation(52));
  ASSERT_EQ(199, correctElevation.getElevation(53));
  ASSERT_EQ(154, correctElevation.getElevation(54));
  ASSERT_EQ(178, correctElevation.getElevation(55));
  ASSERT_EQ(499, correctElevation.getElevation(56));
  ASSERT_EQ(495, correctElevation.getElevation(57));
  ASSERT_EQ(498, correctElevation.getElevation(58));
  ASSERT_EQ(500, correctElevation.getElevation(59));
  ASSERT_EQ(494, correctElevation.getElevation(60));
  ASSERT_EQ(492, correctElevation.getElevation(61));
  ASSERT_EQ(491, correctElevation.getElevation(62));
  ASSERT_EQ(491, correctElevation.getElevation(63));
  ASSERT_EQ(491, correctElevation.getElevation(64));
  ASSERT_EQ(491, correctElevation.getElevation(65));
  ASSERT_EQ(490, correctElevation.getElevation(66));
  ASSERT_EQ(INVALID_ELEV, correctElevation.getElevation(67));
  ASSERT_EQ(490, correctElevation.getElevation(68));
  ASSERT_EQ(490, correctElevation.getElevation(69));
  ASSERT_EQ(491, correctElevation.getElevation(70));
  ASSERT_EQ(491, correctElevation.getElevation(71));
  ASSERT_EQ(491, correctElevation.getElevation(72));
  ASSERT_EQ(491, correctElevation.getElevation(73));
  ASSERT_EQ(494, correctElevation.getElevation(74));
  ASSERT_EQ(493, correctElevation.getElevation(75));
  ASSERT_EQ(495, correctElevation.getElevation(76));
  ASSERT_EQ(495, correctElevation.getElevation(77));
  ASSERT_EQ(499, correctElevation.getElevation(78));
  ASSERT_EQ(505, correctElevation.getElevation(79));
  ASSERT_EQ(494, correctElevation.getElevation(80));
  ASSERT_EQ(494, correctElevation.getElevation(81));
  ASSERT_EQ(494, correctElevation.getElevation(82));
  ASSERT_EQ(489, correctElevation.getElevation(83));
  ASSERT_EQ(494, correctElevation.getElevation(84));
  ASSERT_EQ(494, correctElevation.getElevation(85));
  ASSERT_EQ(494, correctElevation.getElevation(86));
  ASSERT_EQ(495, correctElevation.getElevation(87));
  ASSERT_EQ(486, correctElevation.getElevation(88));
  ASSERT_EQ(486, correctElevation.getElevation(89));
  ASSERT_EQ(486, correctElevation.getElevation(90));
  ASSERT_EQ(486, correctElevation.getElevation(91));
  ASSERT_EQ(486, correctElevation.getElevation(92));
  ASSERT_EQ(485, correctElevation.getElevation(93));
  ASSERT_EQ(485, correctElevation.getElevation(94));
  ASSERT_EQ(486, correctElevation.getElevation(95));
  ASSERT_EQ(485, correctElevation.getElevation(96));
  ASSERT_EQ(485, correctElevation.getElevation(97));
  ASSERT_EQ(484, correctElevation.getElevation(98));
  ASSERT_EQ(484, correctElevation.getElevation(99));
  ASSERT_EQ(484, correctElevation.getElevation(100));
  ASSERT_EQ(483, correctElevation.getElevation(101));
  ASSERT_EQ(482, correctElevation.getElevation(102));
  ASSERT_EQ(483, correctElevation.getElevation(103));
  ASSERT_EQ(483, correctElevation.getElevation(104));
  ASSERT_EQ(482, correctElevation.getElevation(105));
  ASSERT_EQ(481, correctElevation.getElevation(106));
  ASSERT_EQ(482, correctElevation.getElevation(107));
  ASSERT_EQ(482, correctElevation.getElevation(108));
  ASSERT_EQ(481, correctElevation.getElevation(109));
  ASSERT_EQ(480, correctElevation.getElevation(110));
  ASSERT_EQ(481, correctElevation.getElevation(111));
  ASSERT_EQ(100, correctElevation.getElevation(112));
  ASSERT_EQ(100, correctElevation.getElevation(113));
  ASSERT_EQ(100, correctElevation.getElevation(114));
  ASSERT_EQ(100, correctElevation.getElevation(115));
  ASSERT_EQ(100, correctElevation.getElevation(116));
  ASSERT_EQ(100, correctElevation.getElevation(117));
  ASSERT_EQ(100, correctElevation.getElevation(118));
  ASSERT_EQ(100, correctElevation.getElevation(119));
  ASSERT_EQ(100, correctElevation.getElevation(120));
  ASSERT_EQ(INVALID_ELEV, correctElevation.getElevation(121));
  ASSERT_EQ(INVALID_ELEV, correctElevation.getElevation(122));
  ASSERT_EQ(INVALID_ELEV, correctElevation.getElevation(123));
  ASSERT_EQ(INVALID_ELEV, correctElevation.getElevation(124));
  ASSERT_EQ(INVALID_ELEV, correctElevation.getElevation(125));
  ASSERT_EQ(INVALID_ELEV, correctElevation.getElevation(126));
  ASSERT_EQ(INVALID_ELEV, correctElevation.getElevation(127));
  ASSERT_EQ(INVALID_ELEV, correctElevation.getElevation(128));
  ASSERT_EQ(601, correctElevation.getElevation(129));
  ASSERT_EQ(609, correctElevation.getElevation(130));
  ASSERT_EQ(611, correctElevation.getElevation(131));
  ASSERT_EQ(633, correctElevation.getElevation(132));
  ASSERT_EQ(640, correctElevation.getElevation(133));
  ASSERT_EQ(662, correctElevation.getElevation(134));
  ASSERT_EQ(679, correctElevation.getElevation(135));
  ASSERT_EQ(685, correctElevation.getElevation(136));
  ASSERT_EQ(693, correctElevation.getElevation(137));
  ASSERT_EQ(712, correctElevation.getElevation(138));
  ASSERT_EQ(726, correctElevation.getElevation(139));
  ASSERT_EQ(740, correctElevation.getElevation(140));
  ASSERT_EQ(760, correctElevation.getElevation(141));
  ASSERT_EQ(785, correctElevation.getElevation(142));
  ASSERT_EQ(799, correctElevation.getElevation(143));
  ASSERT_EQ(810, correctElevation.getElevation(144));
  ASSERT_EQ(810, correctElevation.getElevation(145));
  ASSERT_EQ(810, correctElevation.getElevation(146));
  ASSERT_EQ(810, correctElevation.getElevation(147));
  ASSERT_EQ(810, correctElevation.getElevation(148));
  ASSERT_EQ(810, correctElevation.getElevation(149));
  ASSERT_EQ(810, correctElevation.getElevation(150));
  ASSERT_EQ(810, correctElevation.getElevation(151));
  ASSERT_EQ(810, correctElevation.getElevation(152));
  ASSERT_EQ(810, correctElevation.getElevation(153));
  ASSERT_EQ(810, correctElevation.getElevation(154));
  ASSERT_EQ(819, correctElevation.getElevation(155));
  ASSERT_EQ(821, correctElevation.getElevation(156));
  ASSERT_EQ(820, correctElevation.getElevation(157));
  ASSERT_EQ(505, correctElevation.getElevation(158));
  ASSERT_EQ(505, correctElevation.getElevation(159));
  ASSERT_EQ(505, correctElevation.getElevation(160));
  ASSERT_EQ(504, correctElevation.getElevation(161));
  ASSERT_EQ(511, correctElevation.getElevation(162));
  ASSERT_EQ(516, correctElevation.getElevation(163));
  ASSERT_EQ(514, correctElevation.getElevation(164));
  ASSERT_EQ(513, correctElevation.getElevation(165));
  ASSERT_EQ(530, correctElevation.getElevation(166));
  ASSERT_EQ(547, correctElevation.getElevation(167));
  ASSERT_EQ(559, correctElevation.getElevation(168));
  ASSERT_EQ(566, correctElevation.getElevation(169));
  ASSERT_EQ(505, correctElevation.getElevation(170));
  ASSERT_EQ(505, correctElevation.getElevation(171));
  ASSERT_EQ(506, correctElevation.getElevation(172));
  ASSERT_EQ(508, correctElevation.getElevation(173));
  ASSERT_EQ(511, correctElevation.getElevation(174));
  ASSERT_EQ(516, correctElevation.getElevation(175));
  ASSERT_EQ(518, correctElevation.getElevation(176));
  ASSERT_EQ(525, correctElevation.getElevation(177));
  ASSERT_EQ(533, correctElevation.getElevation(178));
  ASSERT_EQ(547, correctElevation.getElevation(179));
  ASSERT_EQ(559, correctElevation.getElevation(180));
  ASSERT_EQ(566, correctElevation.getElevation(181));
}
